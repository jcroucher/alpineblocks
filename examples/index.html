<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.twind.style" crossorigin></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai-sublime.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    

    <link rel="stylesheet" href="../dist/frontend.css" media="all" data-turbo-track="reload">
    <link rel="stylesheet" href="../dist/editor.css" media="all" data-turbo-track="reload">
    <title>AlpineBlocks - Block-Based Content Editor</title>

    <style>
        svg {
            fill: currentColor;
            width: 10px;
            height: 10px;
        }

        .flex {
            display: flex;
        }

        .flex-1 {
            flex: 1 1 0%;
        }

        .flex-auto {
            flex: 1 1 auto;
        }

        .flex-initial {
            flex: 0 1 auto;
        }

        .flex-none {
            flex: none;
        }

        .flex-row {
            flex-direction: row;
        }

        .flex-row-reverse {
            flex-direction: row-reverse;
        }

        .flex-col {
            flex-direction: column;
        }

        .flex-col-reverse {
            flex-direction: column-reverse;
        }

        pre {
            background: #272822; /* Monokai background */
            color: #f8f8f2;
            padding: 10px;
            border-radius: 4px;
            overflow: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 16px;
            max-width: 600px;
            margin: 2rem auto;
        }

        code {
            line-height: 1.5;
        }
        
        /* Preview content styles */
        .preview-content-wrapper {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            color: #1f2937;
            padding: 1rem;
        }
        
        /* Ensure CSS variables are available in preview context */
        .preview-content-wrapper {
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            
            /* Border Radius */
            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            
            /* Font Sizes */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Ensure frontend styles apply within preview wrapper */
        .preview-content-wrapper .alert-block {
            display: flex !important;
            align-items: flex-start !important;
            gap: var(--space-3) !important;
            padding: var(--space-4) !important;
            margin: var(--space-4) 0 !important;
            border-radius: var(--radius-lg) !important;
            border-left: 4px solid !important;
            position: relative !important;
            font-size: var(--text-sm) !important;
            line-height: 1.5 !important;
            box-shadow: var(--shadow-sm) !important;
        }
        
        .preview-content-wrapper .alert-info {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;
            border-left-color: #1e40af !important;
            color: white !important;
        }
        
        .preview-content-wrapper .alert-success {
            background: linear-gradient(135deg, #10b981 0%, #047857 100%) !important;
            border-left-color: #065f46 !important;
            color: white !important;
        }
        
        .preview-content-wrapper .alert-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%) !important;
            border-left-color: #b45309 !important;
            color: white !important;
        }
        
        .preview-content-wrapper .alert-error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
            border-left-color: #b91c1c !important;
            color: white !important;
        }
        
        .preview-content-wrapper .alert-icon {
            width: 20px !important;
            height: 20px !important;
            flex-shrink: 0 !important;
            margin-top: 2px !important;
        }
        
        .preview-content-wrapper .alert-content {
            flex-grow: 1 !important;
            margin: 0 !important;
            min-height: 1.2em !important;
        }
    </style>
</head>
<body>
<div class="bg-gray-900">
    <main>
        <!-- Hero section -->
        <div class="relative isolate overflow-hidden">
            <svg class="absolute inset-0 -z-10 h-full w-full stroke-white/10 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]"
                 aria-hidden="true">
                <defs>
                    <pattern id="983e3e4c-de6d-4c3f-8d64-b9761d1534cc" width="200" height="200" x="50%" y="-1"
                             patternUnits="userSpaceOnUse">
                        <path d="M.5 200V.5H200" fill="none"/>
                    </pattern>
                </defs>
                <svg x="50%" y="-1" class="overflow-visible fill-gray-800/20">
                    <path d="M-200 0h201v201h-201Z M600 0h201v201h-201Z M-400 600h201v201h-201Z M200 800h201v201h-201Z"
                          stroke-width="0"/>
                </svg>
                <rect width="100%" height="100%" stroke-width="0" fill="url(#983e3e4c-de6d-4c3f-8d64-b9761d1534cc)"/>
            </svg>
            <div class="absolute left-[calc(50%-4rem)] top-10 -z-10 transform-gpu blur-3xl sm:left-[calc(50%-18rem)] lg:left-48 lg:top-[calc(50%-30rem)] xl:left-[calc(50%-24rem)]"
                 aria-hidden="true">
                <div class="aspect-[1108/632] w-[69.25rem] bg-gradient-to-r from-[#80caff] to-[#4f46e5] opacity-20"
                     style="clip-path: polygon(73.6% 51.7%, 91.7% 11.8%, 100% 46.4%, 97.4% 82.2%, 92.5% 84.9%, 75.7% 64%, 55.3% 47.5%, 46.5% 49.4%, 45% 62.9%, 50.3% 87.2%, 21.3% 64.1%, 0.1% 100%, 5.4% 51.1%, 21.4% 63.9%, 58.9% 0.2%, 73.6% 51.7%)"></div>
            </div>
            <div class="mx-auto max-w-7xl px-6 pb-24 pt-10 sm:pb-40 lg:flex lg:px-8 lg:pt-40">
                <div class="mx-auto max-w-2xl flex-shrink-0 lg:mx-0 lg:max-w-xl lg:pt-8">
                    <div class="flex items-center gap-3">
                        <svg class="h-10 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 3h18v4H3V3zm0 6h18v4H3V9zm0 6h18v4H3v-4z"/>
                        </svg>
                        <span class="text-2xl font-bold text-white">AlpineBlocks</span>
                    </div>
                    <div class="mt-24 sm:mt-32 lg:mt-16">
                        <a href="#" class="inline-flex space-x-6">
                            <span class="rounded-full bg-indigo-500/10 px-3 py-1 text-sm font-semibold leading-6 text-indigo-400 ring-1 ring-inset ring-indigo-500/20">Open Source</span>
                            <span class="inline-flex items-center space-x-2 text-sm font-medium leading-6 text-gray-300">
                    <span>Block-based content editor</span>
                    <svg class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd"
                            d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                            clip-rule="evenodd"/>
                    </svg>
                  </span>
                        </a>
                    </div>
                    <h1 class="mt-10 text-4xl font-bold tracking-tight text-white sm:text-6xl">Build Rich Content
                        with Alpine.js</h1>
                    <p class="mt-6 text-lg leading-8 text-gray-300">A powerful block-based content editor built with Alpine.js. Create dynamic, interactive content with drag-and-drop simplicity.</p>
                    <div class="mt-10 flex items-center gap-x-6">
                        <a href="#demo"
                           class="rounded-md bg-indigo-500 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400">Try
                            Demo</a>
                        <a href="https://github.com/jcroucher/alpineblocks" class="text-sm font-semibold leading-6 text-white">View on GitHub <span
                                aria-hidden="true">→</span></a>
                    </div>
                </div>
                <div class="mx-auto mt-16 flex max-w-2xl sm:mt-24 lg:ml-10 lg:mr-0 lg:mt-0 lg:max-w-none lg:flex-none xl:ml-32">
                    <div class="max-w-3xl flex-none sm:max-w-5xl lg:max-w-none">
                        <div class="w-[76rem] rounded-md bg-white/5 shadow-2xl ring-1 ring-white/10 p-8">
                            <div class="bg-gray-900 rounded-lg p-6">
                                <div class="flex items-center gap-2 mb-4">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                                <div class="text-green-400 font-mono text-sm">
                                    <div class="mb-1">// AlpineBlocks Editor</div>
                                    <div class="mb-1">&lt;div class="editor-layout" x-data="alpineEditor()"&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;!-- Tools Panel --&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;div x-data="editorToolbar()"&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="tool-item" draggable="true"&gt;📝 Paragraph&lt;/div&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="tool-item" draggable="true"&gt;🏷️ Header&lt;/div&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;/div&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;!-- Content Area --&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;div class="editor-content"&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&nbsp;&nbsp;&lt;template x-for="block in blocks"&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="ab-block" x-html="block.render()"&gt;&lt;/div&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/template&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;/div&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;!-- Settings Panel --&gt;</div>
                                    <div class="mb-1">&nbsp;&nbsp;&lt;div x-data="editorSettings()"&gt;...&lt;/div&gt;</div>
                                    <div>&lt;/div&gt;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature section -->
        <div class="mt-32 sm:mt-56">
            <div class="mx-auto max-w-7xl px-6 lg:px-8">
                <div class="mx-auto max-w-2xl sm:text-center">
                    <h2 class="text-base font-semibold leading-7 text-indigo-400">Powerful Features</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-white sm:text-4xl">Everything you need to build rich content</p>
                    <p class="mt-6 text-lg leading-8 text-gray-300">AlpineBlocks provides a comprehensive set of tools for creating dynamic, interactive content. From basic text blocks to complex multimedia components, build exactly what you need.</p>
                </div>
            </div>
            <div class="relative overflow-hidden pt-16">
                <div class="mx-auto px-6 lg:px-8">
                    <div class="container text-center" id="demo" x-data="editorPages()">
                        <div class="editor-layout">
                            <!-- Tools Panel -->
                            <div class="panel" x-data="{ activeTab: 'tools' }">
                                <div class="panel-header">
                                    <svg class="panel-header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                    Content
                                </div>
                                <div class="panel-tabs">
                                    <button class="panel-tab" 
                                            :class="{ 'active': activeTab === 'tools' }"
                                            @click="activeTab = 'tools'">
                                        Tools
                                    </button>
                                    <button class="panel-tab" 
                                            :class="{ 'active': activeTab === 'templates' }"
                                            @click="activeTab = 'templates'">
                                        Templates
                                    </button>
                                </div>
                                <div class="panel-content">
                                    <!-- Tools Tab -->
                                    <div x-show="activeTab === 'tools'">
                                        <div class="tool-category">
                                            <div class="tool-category-header">Basic</div>
                                            <div id="toolbar" x-data="editorToolbar()">
                                                <template x-for="tool in tools" :key="tool.name">
                                                    <div class="tool-item" draggable="true"
                                                         @dragstart="handleDragStart($event, tool)" 
                                                         @dragend="handleDragEnd($event)"
                                                         @click="handleClick($event, tool)"
                                                         @dragover.prevent=""
                                                         @dragenter.prevent="" 
                                                         @drop="handleDrop($event, tool)"
                                                         title="Click to append to bottom, or drag to position anywhere">
                                                        <div class="tool-icon" x-html="tool.icon"></div>
                                                        <div class="tool-name" x-text="tool.name"></div>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Templates Tab -->
                                    <div x-show="activeTab === 'templates'" x-data="editorTemplates()">
                                        <div class="templates-section">
                                            <div class="templates-header">
                                            </div>
                                            <div class="templates-grid">
                                                <div x-show="loading" class="template-loading">
                                                    <div class="loading-spinner"></div>
                                                    <span>Loading templates...</span>
                                                </div>
                                                <template x-for="template in templates" :key="template.id">
                                                    <div class="template-item" 
                                                         draggable="true"
                                                         @dragstart="handleTemplateDragStart($event, template)"
                                                         @dragend="handleTemplateDragEnd($event)"
                                                         @click="handleTemplateClick($event, template)"
                                                         :title="template.description">
                                                        <div class="template-preview">
                                                            <div class="template-header">
                                                                <div class="template-icon" x-html="template.icon"></div>
                                                                <div class="template-name" x-text="template.name"></div>
                                                            </div>
                                                            <div class="template-description" x-text="template.description"></div>
                                                        </div>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Editor Area -->
                            <div class="panel editor-area" 
                                 id="alpineblocks-editor"
                                 :class="{ 'print-mode': projectSettings.type === 'print' }"
                                 :style="projectSettings.type === 'print' ? `--print-width: ${projectSettings.printWidth || '210mm'}; --print-height: ${projectSettings.printMaxHeight || '297mm'};` : ''"
                                 x-data="alpineEditor({
                                      tools: [
                                        {
                                          class: 'Paragraph',
                                          config: {
                                            content: '<p>Hello, world!</p>'
                                          }
                                        },
                                        {
                                          class: 'Header',
                                          config: {
                                            content: 'Heading Text',
                                            level: 'h2'
                                          }
                                        },
                                        {
                                          class: 'List',
                                          config: {
                                            content: '<li>List item 1</li>',
                                            type: 'ul'
                                          }
                                        },
                                        {
                                          class: 'Code',
                                          config: {
                                            content: '// Your code here',
                                            language: 'javascript',
                                            showLineNumbers: true
                                          }
                                        },
                                        {
                                          class: 'Image',
                                          config: {
                                            src: '',
                                            alt: '',
                                            caption: '',
                                            alignment: 'center',
                                            width: 'auto'
                                          }
                                        },
                                        {
                                          class: 'Quote',
                                          config: {
                                            content: 'Enter your quote here',
                                            attribution: '',
                                            style: 'default'
                                          }
                                        },
                                        {
                                          class: 'WYSIWYG',
                                          config: {
                                            content: 'Start typing here...',
                                            format: 'p'
                                          }
                                        },
                                        {
                                          class: 'Alert',
                                          config: {
                                            content: 'Alert message goes here',
                                            type: 'info',
                                            dismissible: false,
                                            icon: true
                                          }
                                        },
                                        {
                                          class: 'VideoPlayer',
                                          config: {
                                            url: '',
                                            type: 'youtube',
                                            autoplay: false,
                                            controls: true,
                                            caption: ''
                                          }
                                        },
                                        {
                                          class: 'AudioPlayer',
                                          config: {
                                            url: '',
                                            type: 'file',
                                            title: '',
                                            artist: '',
                                            controls: true
                                          }
                                        },
                                        {
                                            class: 'Carousel',
                                            config: {
                                              slides: [{ image: '', caption: '' }],
                                              showArrows: true,
                                              showDots: true
                                            }
                                          },
                                        {
                                          class: 'Columns',
                                          config: {
                                            columns: [
                                              { blocks: [], width: '1fr' },
                                              { blocks: [], width: '1fr' }
                                            ],
                                            gap: '20px',
                                            alignment: 'top',
                                            responsive: true
                                          }
                                        },
                                        {
                                          class: 'Raw',
                                          config: {
                                            content: '',
                                            mode: 'html',
                                            showPreview: true,
                                            validateHtml: true
                                          }
                                        },
                                        {
                                          class: 'Delimiter',
                                          config: {
                                            style: 'line',
                                            color: '#E8E8E8'
                                          }
                                        },
                                        {
                                          class: 'Button',
                                          config: {
                                            text: 'Click me',
                                            type: 'primary',
                                            size: 'medium'
                                          }
                                        }
                                    ]
                                  })">
                                
                                <!-- Header toolbar rendered outside editor-content -->
                                <template x-if="getHeaderToolbar">
                                    <div class="header-toolbar-container" x-html="getHeaderToolbar()"></div>
                                </template>
                                
                                <div class="editor-content">
                                            
                                            <template x-for="block in getEditorBlocks()" :key="block.id">
                                                <div class="drop-target ab-block"
                                                     @dragover.prevent="handleDragOver($event, block.id)"
                                                     @drop="handleDrop($event, 'end', block.id)"
                                                     @dragleave="handleDragLeave($event, block.id)"
                                                     @focusin="setActive($event, block.id)"
                                                     @click="setActive($event, block.id)" x-ref="block.id"
                                                     x-bind:id="block.id"
                                                     :class="{
                                                        'left-border': selectedBlock === block.id,
                                                        'top-border': hoveredTarget[block.id] === 'top',
                                                        'bottom-border': hoveredTarget[block.id] === 'bottom'
                                                        }">

                                                    <!-- Remove Button -->
                                                    <button class="block-remove-btn" 
                                                            @click.stop="showDeleteConfirmation(block.id)"
                                                            title="Remove block">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M18 6L6 18M6 6l12 12"/>
                                                        </svg>
                                                    </button>

                                                    <!-- Block content -->
                                                    <div x-html="block.editorRender()" class="block-content"></div>
                                                </div>
                                            </template>

                                        </div>
                                </div>

                                <!-- Settings Panel -->
                                <div class="panel" x-data="{ activeTab: 'properties' }">
                                    <div class="panel-header">
                                        <svg class="panel-header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="3"/>
                                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                                        </svg>
                                        Settings
                                    </div>
                                    <div class="panel-tabs">
                                        <button class="panel-tab" 
                                                :class="{ 'active': activeTab === 'properties' }"
                                                @click="activeTab = 'properties'">
                                            Properties
                                        </button>
                                        <button class="panel-tab" 
                                                :class="{ 'active': activeTab === 'pages' }"
                                                @click="activeTab = 'pages'">
                                            Pages
                                        </button>
                                    </div>
                                    <div class="panel-content">
                                        <!-- Properties Tab -->
                                        <div x-show="activeTab === 'properties'" 
                                             id="settings" 
                                             x-data="editorSettings('alpineblocks-editor', {})">
                                            <template x-for="setting in settings" :key="setting.name">
                                                <div class="settings-group">
                                                    <template x-if="typeof setting.callback !== 'undefined'">
                                                        <div class="settings-field">
                                                            <button class="settings-label" x-text="setting.name"
                                                                    @click="doCallback(setting.callback)"></button>
                                                        </div>
                                                    </template>

                                                    <template x-if="typeof setting.html !== 'undefined'">
                                                        <div class="settings-field">
                                                            <label class="settings-label" x-text="setting.label || setting.name"></label>
                                                            <div x-html="setting.html"></div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </template>
                                            
                                            <!-- Block Actions -->
                                            <template x-if="currentBlockId">
                                                <div class="settings-group">
                                                    <div class="settings-field">
                                                        <label class="settings-label">Block Actions</label>
                                                        <div class="block-actions">
                                                            <button class="btn-action btn-duplicate" 
                                                                    @click="duplicateBlock()"
                                                                    :disabled="!canDuplicate()"
                                                                    :class="{ 'disabled': !canDuplicate() }"
                                                                    title="Duplicate this block">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 512 512" fill="currentColor">
                                                                    <path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192.1 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V109.3C512 100.8 508.6 92.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H256c-8.836 0-16-7.164-16-16V64.02c0-8.838 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h48V320zM272 448c0 8.836-7.164 16-16 16H64c-8.836 0-16-7.164-16-16V192c0-8.836 7.164-16 16-16H96c8.836 0 16 7.164 16 16s-7.164 16-16 16H80v240h160V416c0-8.836 7.164-16 16-16s16 7.164 16 16V448z"/>
                                                                </svg>
                                                                Duplicate
                                                            </button>
                                                            <button class="btn-action btn-delete" 
                                                                    @click="deleteBlock()"
                                                                    title="Delete this block">
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 448 512" fill="currentColor">
                                                                    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>
                                                                </svg>
                                                                Delete
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                        
                                        <!-- Pages Tab -->
                                        <div x-show="activeTab === 'pages'">
                                            <div class="pages-section">
                                                <div class="pages-header">
                                                    <button class="btn-add-page" @click="addPage()">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <line x1="12" y1="5" x2="12" y2="19"/>
                                                            <line x1="5" y1="12" x2="19" y2="12"/>
                                                        </svg>
                                                        Add Page
                                                    </button>
                                                </div>
                                                <div class="pages-list">
                                                    <template x-for="(page, index) in pages" :key="page.id">
                                                        <div class="page-item" :class="{ 'active': page.id === currentPageId }">
                                                            <div class="page-content">
                                                                <!-- Page Image Thumbnail -->
                                                                <div class="page-thumbnail" @click="switchToPage(page.id)">
                                                                    <div x-show="page.image" class="page-image-preview">
                                                                        <img :src="page.image" :alt="page.title + ' thumbnail'" />
                                                                    </div>
                                                                    <div x-show="!page.image" class="page-image-placeholder">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                                                            <circle cx="9" cy="9" r="2"/>
                                                                            <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                                
                                                                <!-- Page Info -->
                                                                <div class="page-info" @click="switchToPage(page.id)">
                                                                    <div class="page-title" x-text="page.title"></div>
                                                                    <div class="page-meta" x-text="`${page.blocks?.length || 0} blocks`"></div>
                                                                </div>
                                                                
                                                                <!-- Page Actions -->
                                                                <div class="page-actions">
                                                                    <button class="btn-icon" @click="setPageImage(page.id)" title="Set Page Image">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 512 512" fill="currentColor">
                                                                            <path d="M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6h96 32H424c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/>
                                                                        </svg>
                                                                    </button>
                                                                    <button class="btn-icon" @click="renamePage(page.id)" title="Rename">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 512 512" fill="currentColor">
                                                                            <path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"/>
                                                                        </svg>
                                                                    </button>
                                                                    <button class="btn-icon" @click="deletePage(page.id)" title="Delete" x-show="pages.length > 1">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 448 512" fill="currentColor">
                                                                            <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>
                                                                        </svg>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>
                                                
                                                <!-- Current Page Blocks -->
                                                <div class="page-blocks-section" x-show="currentPageId">
                                                    <div class="page-blocks-header">
                                                        <h4>Current Page Blocks</h4>
                                                        <span class="current-page-name" x-text="getCurrentPageTitle()"></span>
                                                    </div>
                                                    <div class="page-blocks-list">
                                                        <template x-for="(block, index) in getCurrentPageBlocks()" :key="block.id || index">
                                                            <div class="page-block-item" @click="selectBlock(block.id || index)">
                                                                <div class="page-block-icon">
                                                                    <span x-text="getBlockIcon(block.type)"></span>
                                                                </div>
                                                                <div class="page-block-info">
                                                                    <div class="page-block-type" x-text="getBlockDisplayName(block.type)"></div>
                                                                    <div class="page-block-content" x-text="getBlockPreview(block)"></div>
                                                                </div>
                                                                <div class="page-block-actions">
                                                                    <button class="btn-icon btn-icon-small" @click.stop="moveBlockUp(index)" x-show="index > 0" title="Move up">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                            <polyline points="18,15 12,9 6,15"/>
                                                                        </svg>
                                                                    </button>
                                                                    <button class="btn-icon btn-icon-small" @click.stop="moveBlockDown(index)" x-show="index < getCurrentPageBlocks().length - 1" title="Move down">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                            <polyline points="6,9 12,15 18,9"/>
                                                                        </svg>
                                                                    </button>
                                                                    <button class="btn-icon btn-icon-small" @click.stop="deleteBlock(index)" title="Delete block">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                                            <polyline points="3,6 5,6 21,6"/>
                                                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                                                        </svg>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </template>
                                                        <div x-show="getCurrentPageBlocks().length === 0" class="page-blocks-empty">
                                                            <p>No blocks in this page yet.</p>
                                                            <p class="text-small">Add blocks from the Tools or Templates tabs.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- Project Settings Section -->
                                                <div class="project-settings-section">
                                                    <div class="project-settings-header">
                                                        <h4>Project Settings</h4>
                                                    </div>
                                                    
                                                    <!-- Project Type -->
                                                    <div class="setting-group">
                                                        <label class="setting-label">Project Type</label>
                                                        <select class="setting-select" 
                                                                x-model="projectSettings.type" 
                                                                @change="updateProjectSetting('type', $event.target.value)">
                                                            <option value="digital">Digital</option>
                                                            <option value="print">Print</option>
                                                        </select>
                                                    </div>
                                                    
                                                    <!-- Print Settings (shown only when print is selected) -->
                                                    <div x-show="projectSettings.type === 'print'" class="print-settings">
                                                        <div class="setting-group">
                                                            <label class="setting-label">Print Format</label>
                                                            <select class="setting-select" @change="selectPrintDefault(printDefaults[$event.target.value])">
                                                                <option value="">Select format...</option>
                                                                <template x-for="(format, index) in printDefaults" :key="index">
                                                                    <option :value="index" x-text="format.name"></option>
                                                                </template>
                                                            </select>
                                                        </div>
                                                        
                                                        <!-- Current Print Settings Display -->
                                                        <div class="current-print-settings">
                                                            <div class="print-setting-item">
                                                                <span class="print-setting-label">Max Height:</span>
                                                                <span class="print-setting-value" x-text="projectSettings.printMaxHeight"></span>
                                                            </div>
                                                            <div class="print-setting-item" x-show="projectSettings.printWidth">
                                                                <span class="print-setting-label">Width:</span>
                                                                <span class="print-setting-value" x-text="projectSettings.printWidth"></span>
                                                            </div>
                                                            <div class="print-setting-item">
                                                                <span class="print-setting-label">Orientation:</span>
                                                                <span class="print-setting-value" x-text="projectSettings.printOrientation"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div> 
                        
                        <!-- JSON and HTML Output Section -->
                        <div class="mt-16" x-data="{ jsonOutput: '[]', htmlOutput: '' }" 
                             x-init="setInterval(() => {
                                 const editorEl = document.getElementById('alpineblocks-editor');
                                 if (editorEl && editorEl._x_dataStack && editorEl._x_dataStack[0]) {
                                     // Get JSON output
                                     if (editorEl._x_dataStack[0].blocksJSON) {
                                         jsonOutput = editorEl._x_dataStack[0].blocksJSON();
                                     }
                                     // Get HTML output
                                     if (editorEl._x_dataStack[0].getCleanHTML) {
                                         htmlOutput = editorEl._x_dataStack[0].getCleanHTML();
                                     }
                                 }
                             }, 1000)">
                            <h2 class="text-center text-2xl font-bold text-white mb-6">Live Output</h2>
                            <p class="text-center text-gray-300 mb-8">This updates automatically as you edit blocks in the demo above</p>
                            
                            <!-- Two column layout for JSON and HTML -->
                            <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <!-- JSON Output Column -->
                                <div>
                                    <h3 class="text-xl font-semibold text-white mb-4">JSON Output</h3>
                                    <div class="bg-gray-900 rounded-lg p-6 max-h-96 overflow-y-auto">
                                        <pre class="text-green-400 font-mono text-sm"><code class="json hljs" x-text="jsonOutput"></code></pre>
                                    </div>
                                </div>
                                
                                <!-- HTML Output Column -->
                                <div>
                                    <h3 class="text-xl font-semibold text-white mb-4">HTML Output</h3>
                                    <div class="bg-gray-900 rounded-lg p-6 max-h-96 overflow-y-auto">
                                        <pre class="text-blue-400 font-mono text-sm"><code class="html hljs" x-text="htmlOutput"></code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    </div>
                
            
        </div>

        <!-- Stats -->
        <div class="mx-auto mt-32 max-w-7xl px-6 sm:mt-56 lg:px-8">
            <div class="mx-auto max-w-2xl lg:mx-0 lg:max-w-xl">
                <h2 class="text-base font-semibold leading-8 text-indigo-400">Built for Developers</h2>
                <p class="mt-2 text-3xl font-bold tracking-tight text-white sm:text-4xl">Flexible, Extensible,
                    and&nbsp;Lightweight</p>
                <p class="mt-6 text-lg leading-8 text-gray-300">AlpineBlocks is designed with developer experience in mind. Easy to integrate, customize, and extend with your own block types and functionality.</p>
            </div>
            <dl class="mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-10 text-white sm:mt-20 sm:grid-cols-2 sm:gap-y-16 lg:mx-0 lg:max-w-none lg:grid-cols-4">
                <div class="flex flex-col gap-y-3 border-l border-white/10 pl-6">
                    <dt class="text-sm leading-6">Built-in Block Types</dt>
                    <dd class="order-first text-3xl font-semibold tracking-tight">18+</dd>
                </div>
                <div class="flex flex-col gap-y-3 border-l border-white/10 pl-6">
                    <dt class="text-sm leading-6">Open Source</dt>
                    <dd class="order-first text-3xl font-semibold tracking-tight">MIT</dd>
                </div>
            </dl>
        </div>

        <!-- CTA section -->
        <div class="relative isolate mt-32 px-6 py-32 sm:mt-56 sm:py-40 lg:px-8">
            <svg class="absolute inset-0 -z-10 h-full w-full stroke-white/10 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]"
                 aria-hidden="true">
                <defs>
                    <pattern id="1d4240dd-898f-445f-932d-e2872fd12de3" width="200" height="200" x="50%" y="0"
                             patternUnits="userSpaceOnUse">
                        <path d="M.5 200V.5H200" fill="none"/>
                    </pattern>
                </defs>
                <svg x="50%" y="0" class="overflow-visible fill-gray-800/20">
                    <path d="M-200 0h201v201h-201Z M600 0h201v201h-201Z M-400 600h201v201h-201Z M200 800h201v201h-201Z"
                          stroke-width="0"/>
                </svg>
                <rect width="100%" height="100%" stroke-width="0" fill="url(#1d4240dd-898f-445f-932d-e2872fd12de3)"/>
            </svg>
            <div class="absolute inset-x-0 top-10 -z-10 flex transform-gpu justify-center overflow-hidden blur-3xl"
                 aria-hidden="true">
                <div class="aspect-[1108/632] w-[69.25rem] flex-none bg-gradient-to-r from-[#80caff] to-[#4f46e5] opacity-20"
                     style="clip-path: polygon(73.6% 51.7%, 91.7% 11.8%, 100% 46.4%, 97.4% 82.2%, 92.5% 84.9%, 75.7% 64%, 55.3% 47.5%, 46.5% 49.4%, 45% 62.9%, 50.3% 87.2%, 21.3% 64.1%, 0.1% 100%, 5.4% 51.1%, 21.4% 63.9%, 58.9% 0.2%, 73.6% 51.7%)"></div>
            </div>
            <div class="mx-auto max-w-2xl text-center">
                <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Ready to get started?<br>Try
                    AlpineBlocks today.</h2>
                <p class="mx-auto mt-6 max-w-xl text-lg leading-8 text-gray-300">Join developers who are already building amazing content experiences with AlpineBlocks. Get started in minutes with our simple, powerful editor.</p>
                <div class="mt-10 flex items-center justify-center gap-x-6">
                    <a href="https://github.com/jcroucher/alpineblocks"
                       class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">Download
                        Now</a>
                    <a href="#demo" class="text-sm font-semibold leading-6 text-white">View Demo <span
                            aria-hidden="true">→</span></a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer aria-labelledby="footer-heading" class="relative">
        <h2 id="footer-heading" class="sr-only">Footer</h2>
        <div class="mx-auto max-w-7xl px-6 pb-8 pt-4 lg:px-8">
            <div class="border-t border-white/10 pt-8 text-center">
                <p class="text-xs leading-5 text-gray-400">&copy; 2024 <a href="https://jcroucher.com" class="text-indigo-400 hover:text-indigo-300 transition-colors">John Croucher</a>. MIT License.</p>
            </div>
        </div>
    </footer>
</div>

<!-- Preview Modal -->
<div x-data="previewModal()" x-show="show" 
     class="fixed inset-0 z-50 overflow-hidden"
     x-transition:enter="transition-opacity ease-out duration-300"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition-opacity ease-in duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     style="display: none;">
    
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black bg-opacity-90" @click="closePreview()"></div>
    
    <!-- Modal Container -->
    <div class="relative w-full h-full flex flex-col">
        
        <!-- Header -->
        <div class="flex items-center justify-between p-4 bg-black bg-opacity-75 backdrop-blur-sm">
            <div class="flex items-center space-x-4">
                <h2 class="text-white text-lg font-semibold">Preview Mode</h2>
                <div class="flex items-center space-x-2">
                    <!-- Mobile View -->
                    <button @click="setViewport('mobile')" 
                            :class="{ 'bg-blue-600': viewport === 'mobile', 'bg-gray-700': viewport !== 'mobile' }"
                            class="px-3 py-2 rounded text-white text-sm hover:bg-blue-500 transition-colors">
                        📱 Mobile
                    </button>
                    <!-- Tablet View -->
                    <button @click="setViewport('tablet')" 
                            :class="{ 'bg-blue-600': viewport === 'tablet', 'bg-gray-700': viewport !== 'tablet' }"
                            class="px-3 py-2 rounded text-white text-sm hover:bg-blue-500 transition-colors">
                        📋 Tablet
                    </button>
                    <!-- Desktop View -->
                    <button @click="setViewport('desktop')" 
                            :class="{ 'bg-blue-600': viewport === 'desktop', 'bg-gray-700': viewport !== 'desktop' }"
                            class="px-3 py-2 rounded text-white text-sm hover:bg-blue-500 transition-colors">
                        💻 Desktop
                    </button>
                </div>
            </div>
            
            <div class="flex items-center space-x-2">
                <!-- Fullscreen Toggle -->
                <button @click="toggleFullscreen()" 
                        class="p-2 text-white hover:bg-gray-700 rounded transition-colors"
                        title="Toggle Fullscreen">
                    <svg x-show="!isFullscreen" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                    </svg>
                    <svg x-show="isFullscreen" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/>
                    </svg>
                </button>
                
                <!-- Close Button -->
                <button @click="closePreview()" 
                        class="p-2 text-white hover:bg-gray-700 rounded transition-colors"
                        title="Close Preview">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Content Area -->
        <div class="flex-1 flex items-center justify-center p-4 overflow-auto">
            <div class="preview-container transition-all duration-300"
                 :class="{
                     'w-full max-w-none': viewport === 'desktop',
                     'w-96 max-w-sm': viewport === 'mobile',
                     'w-192 max-w-3xl': viewport === 'tablet'
                 }"
                 :style="getViewportStyles()">
                
                <!-- Device Frame (for mobile/tablet) -->
                <div x-show="viewport !== 'desktop'" 
                     class="relative bg-gray-800 rounded-3xl p-2 shadow-2xl"
                     :class="{
                         'aspect-[9/19]': viewport === 'mobile',
                         'aspect-[4/3]': viewport === 'tablet'
                     }">
                    <!-- Screen -->
                    <div class="w-full h-full bg-white rounded-2xl overflow-auto">
                        <div class="preview-content-wrapper" x-html="cleanContent"></div>
                    </div>
                </div>
                
                <!-- Desktop View -->
                <div x-show="viewport === 'desktop'" 
                     class="w-full bg-white rounded-lg shadow-2xl overflow-auto"
                     style="min-height: 70vh;">
                    <div class="preview-content-wrapper p-4" x-html="cleanContent"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="module">
    // For Parcel dev mode: Import AlpineBlocks and start Alpine manually
    // This ensures components are registered before Alpine processes the DOM
    
    // Import Alpine.js as a module so we have full control
    import Alpine from 'alpinejs';
    
    // Make Alpine available globally
    window.Alpine = Alpine;
    
    // Use an async function to handle the initialization
    async function initializeAlpineBlocks() {
        // Import AlpineBlocks to register all components
        await import('../src/index.js');
        
        // Configure remote layout loading for testing
        console.log('AlpineBlocks configuration ready for remote layouts');
        
        window.AlpineBlocks.configure({
            layouts: {
                source: 'remote',
                url: '/layouts/',
                index: 'index.json'
            }
        });
        
        // Register preview modal component
    Alpine.data('previewModal', () => ({
        show: false,
        content: '',
        cleanContent: '',
        viewport: 'desktop',
        isFullscreen: false,
        
        init() {
            document.addEventListener('editor-preview', (e) => {
                this.openPreview(e.detail.content);
            });
            
            document.addEventListener('fullscreenchange', () => {
                this.isFullscreen = !!document.fullscreenElement;
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && this.show) {
                    this.closePreview();
                }
            });
        },
        
        async openPreview(htmlContent) {
            this.content = htmlContent;
            this.cleanContent = await this.cleanContentForPreview(htmlContent);
            this.show = true;
            document.body.style.overflow = 'hidden';
        },
        
        async cleanContentForPreview(htmlContent) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlContent;
            
            const elementsToClean = tempDiv.querySelectorAll('*');
            elementsToClean.forEach(el => {
                const classesToRemove = [
                    'ab-block', 'selected', 'block-content', 'block-remove-btn',
                    'wysiwyg-editor', 'wysiwyg-toolbar', 'wysiwyg-toolbar-group',
                    'wysiwyg-btn', 'wysiwyg-select', 'code-editor', 'code-header',
                    'code-input', 'preview-section', 'preview-header', 'preview-content',
                    'raw-preview-toolbar', 'toggle-btn', 'validation-error', 'validation-success',
                    'block-actions', 'btn-action', 'btn-duplicate', 'btn-delete',
                    'toolbar-btn', 'toolbar-select', 'toolbar-group', 'toolbar-separator',
                    'drop-target', 'top-border', 'bottom-border', 'left-border'
                ];
                
                classesToRemove.forEach(className => {
                    el.classList.remove(className);
                });
                
                const attributesToRemove = [
                    'x-data', 'x-init', 'x-show', 'x-html', '@click', '@blur', '@input',
                    '@dragover', '@drop', '@dragstart', '@dragend', 'contenteditable',
                    'data-block-id', 'data-tool', 'data-tool-id', 'draggable'
                ];
                
                attributesToRemove.forEach(attr => {
                    el.removeAttribute(attr);
                });
                
                if (el.style) {
                    el.style.removeProperty('cursor');
                    el.style.removeProperty('outline');
                    el.style.removeProperty('user-select');
                    el.style.removeProperty('pointer-events');
                }
            });
            
            const buttonsToRemove = tempDiv.querySelectorAll('button, .block-remove-btn, .toolbar-btn, .btn-action');
            buttonsToRemove.forEach(btn => btn.remove());
            
            const editorsToRemove = tempDiv.querySelectorAll('.wysiwyg-toolbar, .code-header, .preview-header, .block-actions, .raw-preview-toolbar');
            editorsToRemove.forEach(editor => editor.remove());
            
            return tempDiv.innerHTML;
        },
        
        closePreview() {
            this.show = false;
            document.body.style.overflow = '';
            
            if (this.isFullscreen) {
                document.exitFullscreen();
            }
        },
        
        setViewport(type) {
            this.viewport = type;
        },
        
        toggleFullscreen() {
            if (!this.isFullscreen) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        },
        
        getViewportStyles() {
            switch (this.viewport) {
                case 'mobile':
                    return 'width: 375px; max-width: 375px;';
                case 'tablet':
                    return 'width: 768px; max-width: 768px;';
                case 'desktop':
                default:
                    return 'width: 100%; max-width: none;';
            }
        }
        }));
        
        // Log that all components are ready
        console.log('[Dev Mode] All AlpineBlocks components registered, starting Alpine...');
        
        // Start Alpine manually after all components are registered
        Alpine.start();
    }
    
    // Initialize everything
    initializeAlpineBlocks().catch(error => {
        console.error('[Dev Mode] Failed to initialize AlpineBlocks:', error);
    });
</script>
<script src="../src/utils/TemplateInteractivity.js" type="module"></script>
<script>
    hljs.highlightAll();
</script>

</body>
</html>
